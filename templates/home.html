{% extends "base.html" %}

{% block content %}
    <h1>ðŸŽ¬ Welcome to the Movie App</h1>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Form to add a new user -->
    <h2>Add a New User</h2>
    <form method="POST" action="{{ url_for('add_user') }}">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <button type="submit">Add User</button>
    </form>

    <!-- List of registered users -->
    <h2>Registered Users</h2>
    <ul>
        {% for user in users %}
            <li><a href="{{ url_for('get_movies', user_id=user.id) }}">{{ user.name }}</a></li>
        {% else %}
            <li>No users yet!</li>
        {% endfor %}
    </ul>
{% endblock %}
